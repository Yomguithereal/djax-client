/* djax-client- Version: 0.1.0 - Author: Yomguithereal (Guillaume Plique) */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DjaxClient=e()}}(function(){var e;return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e){return!(!e||"object"!=typeof e||Array.isArray(e)||e instanceof Date||e instanceof RegExp)}function o(e,t,n,i){var s={},u=void 0;for(u in e)if("function"!=typeof e[u]||g(u))if("string"==typeof e[u]){s[u]=e[u];for(var f=void 0;null!==(f=t.exec(e[u]));){var c=a(f,2),l=c[0],d=c[1],p=n[d];"function"==typeof p&&(p=p.call(i)),p&&(s[u]=s[u].replace(l,p))}t.lastIndex=0}else s[u]="params"!==u&&r(e[u])?o(e[u],t,n,i):e[u];else s[u]=e[u].call(i);return s}function i(e,t){var n={},r=void 0;for(r in e)n[r]=g(r)&&"function"==typeof e[r]?e[r].bind(t):e[r];return n}function s(e,t){return t?"/"===e.charAt(0)?e.slice(1):e:"/"===e.slice(-1)?e.slice(0,-1):e}function u(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.reduce(function(e,t){return[s(e),s(t,!0)].join("/")})}var f=function(e){return e&&e.__esModule?e:{"default":e}},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(f){o=!0,i=f}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var d=e("djax"),p=f(d),y=e("object-assign"),h=f(y),g=function(e){return!!~["beforeSend","success","error"].indexOf(e)},v={},b={baseUrl:null,engine:p["default"],solver:/\:([^/:]+)/g},x=function(){function e(t){var n=this,r=t.settings,o=void 0===r?{}:r,s=t.defaults,u=void 0===s?{}:s,f=t.define,a=void 0===f?{}:f,l=t.services,d=void 0===l?{}:l;c(this,e);var p=o.scope||null;this._settings=h["default"]({},b,o),this._defaults=i(h["default"]({},v,u),p),this._definitions=i(a,p),this._engine=this._settings.engine,this._services=d,Object.keys(d).forEach(function(e){return n.register(e,d[e])})}return l(e,[{key:"register",value:function(e){var t=this,n=void 0===arguments[1]?{}:arguments[1];"string"==typeof n&&(n={url:n});var o=i(n,this._settings.scope||null);this._services[e]=o,this[e]=function(n,i){var s=r(n)?h["default"]({},o,n):n||{};return"function"==typeof n&&(i=n,s=o),t.request.call(t,e,s,i)}}},{key:"request",value:function(e,t,n){arguments.length<3&&("function"==typeof t&&(n=t),"string"!=typeof e?(t=e,e=null):t={}),arguments.length<2&&("function"==typeof e?(n=e,e=null,t={}):"object"==typeof e&&(t=e,e=null,n=null)),n=n||Function.prototype;var r=this._services[e];if(!r&&e)throw Error("djax-client.request: inexistent service.");var i=h["default"]({},this._defaults,r,t);if(!i.url)throw Error("djax-client.request: no url was provided.");return i=o(i,this._settings.solver,h["default"]({},t.params,this._definitions),this._settings.scope||null),this._settings.baseUrl&&(i.url=u(this._settings.baseUrl,i.url)),this._engine(i).fail(function(e,t){var r=new Error(t);return r.xhr=e,n(r)}).done(function(e){return n(null,e)})}}]),e}();n["default"]=x,t.exports=n["default"]},{djax:2,"object-assign":3}],2:[function(t,n,r){(function(t){"use strict";function o(e,n){if(!o.xhr)throw new Error("XMLHttpRequest not found. You can specify which XMLHttpRequest you want to use by using `ajax.xhr = myXHR`.");var r=[],i=[];if("string"==typeof e)e={url:e},2===arguments.length&&("function"==typeof n?r.push(n):Array.isArray(n)&&(r=r.concat(n)));else if("object"!=typeof e||!e)throw new Error("Wrong arguments");"function"==typeof e.success?r.push(e.success):Array.isArray(e.success)&&(r=r.concat(e.success)),"function"==typeof e.error?i.push(e.error):Array.isArray(e.error)&&(i=i.concat(e.error));var s,u,f,a,c,l=!1,d=e.url,p=new o.xhr,y=e.type||"GET",h=e.dataType||"json",g=e.contentType||"application/x-www-form-urlencoded";if(!d||"string"!=typeof d)throw new Error("Wrong arguments");if(e.data){if("string"==typeof e.data)u=e.data;else if(/json/.test(g))u=JSON.stringify(e.data);else{u=[];for(s in e.data)u.push(encodeURIComponent(s)+"="+encodeURIComponent(e.data[s]));u=u.join("&")}/GET|DELETE/i.test(y)&&(d+=/\?/.test(d)?"&"+u:"?"+u,u="")}if(p.onreadystatechange=function(){if(4===+p.readyState)if(l=!0,f&&clearTimeout(f),/^2/.test(p.status)){if(l=!0,c="success",u=p.responseText,/json/.test(h))try{u=u?JSON.parse(u):""}catch(e){return a=function(e,t){t.forEach(function(e){e(p,c="parsererror")})},void a(null,i)}204===+p.status&&(c="nocontent",u=t),a=function(e,t){e.forEach(function(e){e(u,c,p)})},a(r)}else(a=function(e,t){t.forEach(function(e){e(p,+p.status?"error":"abort",p.responseText)})})(null,i)},e.xhrFields&&"object"==typeof e.xhrFields)for(s in e.xhrFields)p[s]=e.xhrFields[s];if(p.open(y,d,!0),p.setRequestHeader("Content-Type",g),e.headers)for(s in e.headers)p.setRequestHeader(s,e.headers[s]);return"function"==typeof e.beforeSend&&e.beforeSend(p,e)===!1?(l=!0,a=function(e,t){t.forEach(function(e){e(p,"abort",p.responseText)})},a(null,i),p.abort()):(e.timeout&&(f=setTimeout(function(){l=!0,p.onreadystatechange=function(){},p.abort(),(a=function(e,t){t.forEach(function(e){e(p,"timeout")})})(null,i)},e.timeout)),p.send(u),p.done=function(e){if("function"==typeof e)r.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");r=r.concat(e)}return l&&("function"==typeof e?a([e]):Array.isArray(e)&&a(e)),this},p.fail=function(e){if("function"==typeof e)i.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");i=i.concat(e)}return l&&("function"==typeof e?a(null,[e]):Array.isArray(e)&&a(null,e)),this},p.then=function(e,t){return e&&this.done(e),t&&this.fail(t),l&&a(Array.isArray(e)?e:"function"==typeof e?[e]:null,Array.isArray(t)?t:"function"==typeof t?[t]:null),this},p)}o.version="1.1.0","undefined"!=typeof XMLHttpRequest&&(o.xhr=XMLHttpRequest),"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=o),r.djax=o):"function"==typeof e&&e.amd?e("djax",[],function(){return o}):this.djax=o}).call(this)},{}],3:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,o,i=r(e),s=1;s<arguments.length;s++){n=arguments[s],o=Object.keys(Object(n));for(var u=0;u<o.length;u++)i[o[u]]=n[o[u]]}return i}},{}]},{},[1])(1)});