/* djax-client- Version: 0.1.1 - Author: Yomguithereal (Guillaume Plique) */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DjaxClient=e()}}(function(){var e;return function t(e,n,r){function o(u,s){if(!n[u]){if(!e[u]){var f="function"==typeof require&&require;if(!s&&f)return f(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)&&!(e instanceof RegExp)}function u(e,t,n,r){var o={},s=void 0;for(s in e)if("function"!=typeof e[s]||g(s))if("string"==typeof e[s]){o[s]=e[s];for(var f=void 0;null!==(f=t.exec(e[s]));){var a=f,l=c(a,2),d=l[0],p=l[1],y=n[p];"function"==typeof y&&(y=y.call(r)),y&&(o[s]=o[s].replace(d,y))}t.lastIndex=0}else"params"!==s&&i(e[s])?o[s]=u(e[s],t,n,r):o[s]=e[s];else o[s]=e[s].call(r);return o}function s(e,t){var n={},r=void 0;for(r in e)g(r)&&"function"==typeof e[r]?n[r]=e[r].bind(t):n[r]=e[r];return n}function f(e,t){return t?"/"===e.charAt(0)?e.slice(1):e:"/"===e.slice(-1)?e.slice(0,-1):e}function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.reduce(function(e,t){return[f(e),f(t,!0)].join("/")})}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(f){o=!0,i=f}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=e("djax"),p=r(d),y=e("object-assign"),h=r(y),g=function(e){return!!~["beforeSend","success","error"].indexOf(e)},v={params:{}},b={baseUrl:null,engine:p["default"],solver:/\:([^/:]+)/g},m=function(){function e(t){var n=this,r=t.settings,i=void 0===r?{}:r,u=t.defaults,f=void 0===u?{}:u,a=t.services,c=void 0===a?{}:a;o(this,e);var l=i.scope||null;this._settings=h["default"]({},b,i),this._defaults=s(h["default"]({},v,f),l),this._engine=this._settings.engine,this._services=c,Object.keys(c).forEach(function(e){return n.register(e,c[e])})}return l(e,[{key:"register",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"string"==typeof n&&(n={url:n});var r=s(n,this._settings.scope||null);this._services[e]=r,this[e]=function(n,o){var u=i(n)?h["default"]({},r,n):n||{};return"function"==typeof n&&(o=n,u=r),t.request.call(t,e,u,o)}}},{key:"request",value:function(e,t,n){arguments.length<3&&("function"==typeof t&&(n=t),"string"!=typeof e?(t=e,e=null):t={}),arguments.length<2&&("function"==typeof e?(n=e,e=null,t={}):"object"==typeof e&&(t=e,e=null,n=null)),n=n||Function.prototype;var r=this._services[e];if(!r&&e)throw Error("djax-client.request: service not found.");var o=h["default"]({},this._defaults,r,t);if(!o.url)throw Error("djax-client.request: no url was provided.");return o=u(o,this._settings.solver,h["default"]({},t.params,this._defaults.params),this._settings.scope||null),this._settings.baseUrl&&(o.url=a(this._settings.baseUrl,o.url)),this._engine(o).fail(function(e,t){var r=new Error(t);return r.xhr=e,n(r)}).done(function(e){return n(null,e)})}}]),e}();n["default"]=m,t.exports=n["default"]},{djax:2,"object-assign":3}],2:[function(t,n,r){(function(t){"use strict";function o(e,n){if(!o.xhr)throw new Error("XMLHttpRequest not found. You can specify which XMLHttpRequest you want to use by using `ajax.xhr = myXHR`.");var r=[],i=[];if("string"==typeof e)e={url:e},2===arguments.length&&("function"==typeof n?r.push(n):Array.isArray(n)&&(r=r.concat(n)));else if("object"!=typeof e||!e)throw new Error("Wrong arguments");"function"==typeof e.success?r.push(e.success):Array.isArray(e.success)&&(r=r.concat(e.success)),"function"==typeof e.error?i.push(e.error):Array.isArray(e.error)&&(i=i.concat(e.error));var u,s,f,a,c,l=!1,d=e.url,p=new o.xhr,y=e.method||e.type||"GET",h=e.dataType||"json",g=e.contentType||"application/x-www-form-urlencoded";if(!d||"string"!=typeof d)throw new Error("Wrong arguments");if(e.data){if("string"==typeof e.data)s=e.data;else if(/json/.test(g))s=JSON.stringify(e.data);else{s=[];for(u in e.data)s.push(encodeURIComponent(u)+"="+encodeURIComponent(e.data[u]));s=s.join("&")}/GET|DELETE/i.test(y)&&(d+=/\?/.test(d)?"&"+s:"?"+s,s="")}if(p.onreadystatechange=function(){if(4===+p.readyState)if(l=!0,f&&clearTimeout(f),/^2/.test(p.status)){if(l=!0,c="success",s=p.responseText,/json/.test(h))try{s=s?JSON.parse(s):""}catch(e){return a=function(e,t){t.forEach(function(e){e(p,c="parsererror")})},void a(null,i)}204===+p.status&&(c="nocontent",s=t),a=function(e,t){e.forEach(function(e){e(s,c,p)})},a(r)}else(a=function(e,t){t.forEach(function(e){e(p,+p.status?"error":"abort",p.responseText)})})(null,i)},e.xhrFields&&"object"==typeof e.xhrFields)for(u in e.xhrFields)p[u]=e.xhrFields[u];if(p.open(y,d,!0),p.setRequestHeader("Content-Type",g),e.headers)for(u in e.headers)p.setRequestHeader(u,e.headers[u]);return"function"==typeof e.beforeSend&&e.beforeSend(p,e)===!1?(l=!0,a=function(e,t){t.forEach(function(e){e(p,"abort",p.responseText)})},a(null,i),p.abort()):(e.timeout&&(f=setTimeout(function(){l=!0,p.onreadystatechange=function(){},p.abort(),(a=function(e,t){t.forEach(function(e){e(p,"timeout")})})(null,i)},e.timeout)),p.send(s),p.done=function(e){if("function"==typeof e)r.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");r=r.concat(e)}return l&&("function"==typeof e?a([e]):Array.isArray(e)&&a(e)),this},p.fail=function(e){if("function"==typeof e)i.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");i=i.concat(e)}return l&&("function"==typeof e?a(null,[e]):Array.isArray(e)&&a(null,e)),this},p.then=function(e,t){return e&&this.done(e),t&&this.fail(t),l&&a(Array.isArray(e)?e:"function"==typeof e?[e]:null,Array.isArray(t)?t:"function"==typeof t?[t]:null),this},p)}o.version="1.2.0","undefined"!=typeof XMLHttpRequest&&(o.xhr=XMLHttpRequest),"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=o),r.djax=o):"function"==typeof e&&e.amd?e("djax",[],function(){return o}):this.djax=o}).call(this)},{}],3:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,o,i=r(e),u=1;u<arguments.length;u++){n=arguments[u],o=Object.keys(Object(n));for(var s=0;s<o.length;s++)i[o[s]]=n[o[s]]}return i}},{}]},{},[1])(1)});