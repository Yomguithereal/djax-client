/* djax-client- Version: 0.2.0 - Author: Yomguithereal (Guillaume Plique) */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DjaxClient=e()}}(function(){var e;return function t(e,r,n){function o(u,s){if(!r[u]){if(!e[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[u]={exports:{}};e[u][0].call(c.exports,function(t){var r=e[u][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)&&!(e instanceof RegExp)}function u(e){return i(e)&&!e.url}function s(e,t,r){for(var n=0,o=t.length;o>n;n++){var i=t[n];if(n===o-1)return void(e[i]=r);e[i]=e[i]||{},e=e[i]}}function a(e,t){if(t){for(var r=0,n=t.length;n>r;r++){var o=t[r];e=e[o]}return e}}function f(e,t,r,n){var o={},u=void 0;for(u in e)if("function"!=typeof e[u]||m[u])if("string"==typeof e[u]){o[u]=e[u];for(var s=void 0;null!==(s=t.exec(e[u]));){var a=s,c=p(a,2),l=c[0],d=c[1],y=r[d];"function"==typeof y&&(y=y.call(n)),y&&(o[u]=o[u].replace(l,y))}t.lastIndex=0}else"params"!==u&&i(e[u])?o[u]=f(e[u],t,r,n):o[u]=e[u];else o[u]=e[u].call(n);return o}function c(e,t){var r={},n=void 0;for(n in e)m[n]&&"function"==typeof e[n]?r[n]=e[n].bind(t):r[n]=e[n];return r}function l(e,t){return t?"/"===e.charAt(0)?e.slice(1):e:"/"===e.slice(-1)?e.slice(0,-1):e}function d(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.reduce(function(e,t){return[l(e),l(t,!0)].join("/")})}Object.defineProperty(r,"__esModule",{value:!0});var p=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(a){o=!0,i=a}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("djax"),g=n(h),v=e("object-assign"),b=n(v),m={beforeSend:!0,error:!0,success:!0},w={params:{}},x={baseUrl:null,engine:g["default"],solver:/\:([^\/:]+)/g},j=function(){function e(t){var r=this,n=t.settings,i=void 0===n?{}:n,u=t.defaults,s=void 0===u?{}:u,a=t.services,f=void 0===a?{}:a;o(this,e);var l=i.scope||null;this._settings=(0,b["default"])({},x,i),this._defaults=c((0,b["default"])({},w,s),l),this._engine=this._settings.engine,this._services=f,Object.keys(f).forEach(function(e){return r.register(e,f[e])})}return y(e,[{key:"register",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(e=[].concat(e),u(r))for(var n in r)this.register(e.concat(n),r[n]);else{"string"==typeof r&&(r={url:r});var o=c(r,this._settings.scope||null);s(this._services,e,o);var a=function(r,n){var u=i(r)?(0,b["default"])({},o,r):r||{};return"function"==typeof r&&(n=r,u=o),t.request.call(t,e,u,n)};s(this,e,a)}}},{key:"request",value:function(e,t,r){arguments.length<3&&("function"==typeof t&&(r=t),"string"==typeof e||Array.isArray(e)?t={}:(t=e,e=null)),arguments.length<2&&("function"==typeof e?(r=e,e=null,t={}):i(e)&&(t=e,e=null,r=null)),e&&(e=[].concat(e)),r=r||Function.prototype;var n=a(this._services,e);if(!n&&e)throw Error("djax-client.request: service not found.");var o=(0,b["default"])({},this._defaults,n,t);if(!o.url)throw Error("djax-client.request: no url was provided.");return o=f(o,this._settings.solver,(0,b["default"])({},t.params,this._defaults.params),this._settings.scope||null),this._settings.baseUrl&&(o.url=d(this._settings.baseUrl,o.url)),this._engine(o).fail(function(e,t){var n=new Error(t);return n.xhr=e,r(n)}).done(function(e){return r(null,e)})}}]),e}();r["default"]=j,t.exports=r["default"]},{djax:2,"object-assign":3}],2:[function(t,r,n){(function(t){"use strict";function o(e,r){if(!o.xhr)throw new Error("XMLHttpRequest not found. You can specify which XMLHttpRequest you want to use by using `ajax.xhr = myXHR`.");var n=[],i=[];if("string"==typeof e)e={url:e},2===arguments.length&&("function"==typeof r?n.push(r):Array.isArray(r)&&(n=n.concat(r)));else if("object"!=typeof e||!e)throw new Error("Wrong arguments");"function"==typeof e.success?n.push(e.success):Array.isArray(e.success)&&(n=n.concat(e.success)),"function"==typeof e.error?i.push(e.error):Array.isArray(e.error)&&(i=i.concat(e.error));var u,s,a,f,c,l=!1,d=e.url,p=new o.xhr,y=e.method||e.type||"GET",h=e.dataType||"json",g=e.contentType||"application/x-www-form-urlencoded";if(!d||"string"!=typeof d)throw new Error("Wrong arguments");if(e.data){if("string"==typeof e.data)s=e.data;else if(/json/.test(g))s=JSON.stringify(e.data);else{s=[];for(u in e.data)s.push(encodeURIComponent(u)+"="+encodeURIComponent(e.data[u]));s=s.join("&")}/GET|DELETE/i.test(y)&&(d+=/\?/.test(d)?"&"+s:"?"+s,s="")}if(p.onreadystatechange=function(){if(4===+p.readyState)if(l=!0,a&&clearTimeout(a),/^2/.test(p.status)){if(l=!0,c="success",s=p.responseText,/json/.test(h))try{s=s?JSON.parse(s):""}catch(e){return f=function(e,t){t.forEach(function(e){e(p,c="parsererror")})},void f(null,i)}204===+p.status&&(c="nocontent",s=t),f=function(e,t){e.forEach(function(e){e(s,c,p)})},f(n)}else(f=function(e,t){t.forEach(function(e){e(p,+p.status?"error":"abort",p.responseText)})})(null,i)},e.xhrFields&&"object"==typeof e.xhrFields)for(u in e.xhrFields)p[u]=e.xhrFields[u];if(p.open(y,d,!0),p.setRequestHeader("Content-Type",g),e.headers)for(u in e.headers)p.setRequestHeader(u,e.headers[u]);return"function"==typeof e.beforeSend&&e.beforeSend(p,e)===!1?(l=!0,f=function(e,t){t.forEach(function(e){e(p,"abort",p.responseText)})},f(null,i),p.abort()):(e.timeout&&(a=setTimeout(function(){l=!0,p.onreadystatechange=function(){},p.abort(),(f=function(e,t){t.forEach(function(e){e(p,"timeout")})})(null,i)},e.timeout)),p.send(s),p.done=function(e){if("function"==typeof e)n.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");n=n.concat(e)}return l&&("function"==typeof e?f([e]):Array.isArray(e)&&f(e)),this},p.fail=function(e){if("function"==typeof e)i.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");i=i.concat(e)}return l&&("function"==typeof e?f(null,[e]):Array.isArray(e)&&f(null,e)),this},p.then=function(e,t){return e&&this.done(e),t&&this.fail(t),l&&f(Array.isArray(e)?e:"function"==typeof e?[e]:null,Array.isArray(t)?t:"function"==typeof t?[t]:null),this},p)}o.version="1.2.0","undefined"!=typeof XMLHttpRequest&&(o.xhr=XMLHttpRequest),"undefined"!=typeof n?("undefined"!=typeof r&&r.exports&&(n=r.exports=o),n.djax=o):"function"==typeof e&&e.amd?e("djax",[],function(){return o}):this.djax=o}).call(this)},{}],3:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var r,u,s=n(e),a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var f in r)o.call(r,f)&&(s[f]=r[f]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(r);for(var c=0;c<u.length;c++)i.call(r,u[c])&&(s[u[c]]=r[u[c]])}}return s}},{}]},{},[1])(1)});