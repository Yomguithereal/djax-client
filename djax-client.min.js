/* djax-client- Version: 0.1.0 - Author: Yomguithereal (Guillaume Plique) */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DjaxClient=e()}}(function(){var e;return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e,t){var n,r={};for(n in e)r[n]=d(n)?e[n].bind(t):e[n];return r}var o=function(e){return e&&e.__esModule?e:{"default":e}},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("djax"),f=o(u),a=e("object-assign"),c=o(a),d=function(e){return!!~["beforeSend","success","error"].indexOf(e)},l={method:"GET",solver:/\:([^\/]+)/},p=function(){function e(t){var n=this,o=t.settings,s=void 0===o?l:o,u=t.define,a=void 0===u?{}:u,c=t.engine,d=void 0===c?f["default"]:c,p=t.scope,h=void 0===p?null:p,y=t.services,g=void 0===y?{}:y;i(this,e),this._settings=r(s,h),this._definitions=r(a,h),this._engine=d,this._scope=h,this._services=g,Object.keys(g).forEach(function(e){return n.register(e,g[e])})}return s(e,[{key:"register",value:function(e){var t=void 0===arguments[1]?{}:arguments[1],n=r(t,this._scope);this._services[e]=n,this[e]=this.request.bind(this,e,n)}},{key:"request",value:function(e,t,n){arguments.length<3&&(n=t,t={}),n=n||Function.prototype;var r=this._services[e];if(!r)throw Error("djax-client.request: inexistent service.");var o=c["default"]({},this._settings,r,t);return this._engine(o).done(n)}}]),e}();n["default"]=p,t.exports=n["default"]},{djax:2,"object-assign":3}],2:[function(t,n,r){(function(t){"use strict";function o(e,n){if(!o.xhr)throw new Error("XMLHttpRequest not found. You can specify which XMLHttpRequest you want to use by using `ajax.xhr = myXHR`.");var r=[],i=[];if("string"==typeof e)e={url:e},2===arguments.length&&("function"==typeof n?r.push(n):Array.isArray(n)&&(r=r.concat(n)));else if("object"!=typeof e||!e)throw new Error("Wrong arguments");"function"==typeof e.success?r.push(e.success):Array.isArray(e.success)&&(r=r.concat(e.success)),"function"==typeof e.error?i.push(e.error):Array.isArray(e.error)&&(i=i.concat(e.error));var s,u,f,a,c,d=!1,l=e.url,p=new o.xhr,h=e.type||"GET",y=e.dataType||"json",g=e.contentType||"application/x-www-form-urlencoded";if(!l||"string"!=typeof l)throw new Error("Wrong arguments");if(e.data){if("string"==typeof e.data)u=e.data;else if(/json/.test(g))u=JSON.stringify(e.data);else{u=[];for(s in e.data)u.push(encodeURIComponent(s)+"="+encodeURIComponent(e.data[s]));u=u.join("&")}/GET|DELETE/i.test(h)&&(l+=/\?/.test(l)?"&"+u:"?"+u,u="")}if(p.onreadystatechange=function(){if(4===+p.readyState)if(d=!0,f&&clearTimeout(f),/^2/.test(p.status)){if(d=!0,c="success",u=p.responseText,/json/.test(y))try{u=u?JSON.parse(u):""}catch(e){return a=function(e,t){t.forEach(function(e){e(p,c="parsererror")})},void a(null,i)}204===+p.status&&(c="nocontent",u=t),a=function(e,t){e.forEach(function(e){e(u,c,p)})},a(r)}else(a=function(e,t){t.forEach(function(e){e(p,+p.status?"error":"abort",p.responseText)})})(null,i)},e.xhrFields&&"object"==typeof e.xhrFields)for(s in e.xhrFields)p[s]=e.xhrFields[s];if(p.open(h,l,!0),p.setRequestHeader("Content-Type",g),e.headers)for(s in e.headers)p.setRequestHeader(s,e.headers[s]);return"function"==typeof e.beforeSend&&e.beforeSend(p,e)===!1?(d=!0,a=function(e,t){t.forEach(function(e){e(p,"abort",p.responseText)})},a(null,i),p.abort()):(e.timeout&&(f=setTimeout(function(){d=!0,p.onreadystatechange=function(){},p.abort(),(a=function(e,t){t.forEach(function(e){e(p,"timeout")})})(null,i)},e.timeout)),p.send(u),p.done=function(e){if("function"==typeof e)r.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");r=r.concat(e)}return d&&("function"==typeof e?a([e]):Array.isArray(e)&&a(e)),this},p.fail=function(e){if("function"==typeof e)i.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");i=i.concat(e)}return d&&("function"==typeof e?a(null,[e]):Array.isArray(e)&&a(null,e)),this},p.then=function(e,t){return e&&this.done(e),t&&this.fail(t),d&&a(Array.isArray(e)?e:"function"==typeof e?[e]:null,Array.isArray(t)?t:"function"==typeof t?[t]:null),this},p)}o.version="1.1.0","undefined"!=typeof XMLHttpRequest&&(o.xhr=XMLHttpRequest),"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=o),r.djax=o):"function"==typeof e&&e.amd?e("djax",[],function(){return o}):this.djax=o}).call(this)},{}],3:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,o,i=r(e),s=1;s<arguments.length;s++){n=arguments[s],o=Object.keys(Object(n));for(var u=0;u<o.length;u++)i[o[u]]=n[o[u]]}return i}},{}]},{},[1])(1)});