/* djax-client- Version: 0.1.0 - Author: Yomguithereal (Guillaume Plique) */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DjaxClient=e()}}(function(){var e;return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var f="function"==typeof require&&require;if(!u&&f)return f(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e,t,n){var r,o={};for(r in e)o[r]=h(r)||"function"!=typeof e[r]?e[r]:e[r].call(n);return o}function o(e,t){var n,r={};for(n in e)r[n]=h(n)&&"function"==typeof e[n]?e[n].bind(t):e[n];return r}function i(e,t){return t?"/"===e.charAt(0)?e.slice(1):e:"/"===e.slice(-1)?e.slice(0,-1):e}function s(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.reduce(function(e,t){return[i(e),i(t,!0)].join("/")})}var u=function(e){return e&&e.__esModule?e:{"default":e}},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var c=e("djax"),l=u(c),d=e("object-assign"),p=u(d),h=function(e){return!!~["beforeSend","success","error"].indexOf(e)},y={method:"GET"},g={baseUrl:null,solver:/\:([^\/]+)/},v=function(){function e(t){var n=this,r=t.settings,i=void 0===r?g:r,s=t.defaults,u=void 0===s?y:s,a=t.define,c=void 0===a?{}:a,d=t.services,p=void 0===d?{}:d;f(this,e);var h=i.scope||null;this._settings=i,this._defaults=o(u,h),this._definitions=o(c,h),this._engine=this._settings.engine||l["default"],this._scope=h,this._services=p,Object.keys(p).forEach(function(e){return n.register(e,p[e])})}return a(e,[{key:"register",value:function(e){var t=void 0===arguments[1]?{}:arguments[1],n=o(t,this._settings.scope||null);this._services[e]=n,this[e]=this.request.bind(this,e,n)}},{key:"request",value:function(e,t,n){arguments.length<3&&("function"==typeof t&&(n=t),"string"!=typeof e?(t=e,e=null):t={}),arguments.length<2&&("function"==typeof e?(n=e,e=null,t={}):"object"==typeof e&&(t=e,e=null,n=null)),n=n||Function.prototype;var o=this._services[e];if(!o&&e)throw Error("djax-client.request: inexistent service.");var i=p["default"]({},this._defaults,o,t);if(!i.url)throw Error("djax-client.request: no url was provided.");return i=r(i,p["default"]({},t.params,this._definitions),this._settings.scope||null),this._settings.baseUrl&&(i.url=s(this._settings.baseUrl,i.url)),this._engine(i).fail(function(e,t){var r=new Error(t);return r.xhr=e,n(r)}).done(function(e){return n(null,e)})}}]),e}();n["default"]=v,t.exports=n["default"]},{djax:2,"object-assign":3}],2:[function(t,n,r){(function(t){"use strict";function o(e,n){if(!o.xhr)throw new Error("XMLHttpRequest not found. You can specify which XMLHttpRequest you want to use by using `ajax.xhr = myXHR`.");var r=[],i=[];if("string"==typeof e)e={url:e},2===arguments.length&&("function"==typeof n?r.push(n):Array.isArray(n)&&(r=r.concat(n)));else if("object"!=typeof e||!e)throw new Error("Wrong arguments");"function"==typeof e.success?r.push(e.success):Array.isArray(e.success)&&(r=r.concat(e.success)),"function"==typeof e.error?i.push(e.error):Array.isArray(e.error)&&(i=i.concat(e.error));var s,u,f,a,c,l=!1,d=e.url,p=new o.xhr,h=e.type||"GET",y=e.dataType||"json",g=e.contentType||"application/x-www-form-urlencoded";if(!d||"string"!=typeof d)throw new Error("Wrong arguments");if(e.data){if("string"==typeof e.data)u=e.data;else if(/json/.test(g))u=JSON.stringify(e.data);else{u=[];for(s in e.data)u.push(encodeURIComponent(s)+"="+encodeURIComponent(e.data[s]));u=u.join("&")}/GET|DELETE/i.test(h)&&(d+=/\?/.test(d)?"&"+u:"?"+u,u="")}if(p.onreadystatechange=function(){if(4===+p.readyState)if(l=!0,f&&clearTimeout(f),/^2/.test(p.status)){if(l=!0,c="success",u=p.responseText,/json/.test(y))try{u=u?JSON.parse(u):""}catch(e){return a=function(e,t){t.forEach(function(e){e(p,c="parsererror")})},void a(null,i)}204===+p.status&&(c="nocontent",u=t),a=function(e,t){e.forEach(function(e){e(u,c,p)})},a(r)}else(a=function(e,t){t.forEach(function(e){e(p,+p.status?"error":"abort",p.responseText)})})(null,i)},e.xhrFields&&"object"==typeof e.xhrFields)for(s in e.xhrFields)p[s]=e.xhrFields[s];if(p.open(h,d,!0),p.setRequestHeader("Content-Type",g),e.headers)for(s in e.headers)p.setRequestHeader(s,e.headers[s]);return"function"==typeof e.beforeSend&&e.beforeSend(p,e)===!1?(l=!0,a=function(e,t){t.forEach(function(e){e(p,"abort",p.responseText)})},a(null,i),p.abort()):(e.timeout&&(f=setTimeout(function(){l=!0,p.onreadystatechange=function(){},p.abort(),(a=function(e,t){t.forEach(function(e){e(p,"timeout")})})(null,i)},e.timeout)),p.send(u),p.done=function(e){if("function"==typeof e)r.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");r=r.concat(e)}return l&&("function"==typeof e?a([e]):Array.isArray(e)&&a(e)),this},p.fail=function(e){if("function"==typeof e)i.push(e);else{if(!Array.isArray(e))throw new Error("Wrong arguments.");i=i.concat(e)}return l&&("function"==typeof e?a(null,[e]):Array.isArray(e)&&a(null,e)),this},p.then=function(e,t){return e&&this.done(e),t&&this.fail(t),l&&a(Array.isArray(e)?e:"function"==typeof e?[e]:null,Array.isArray(t)?t:"function"==typeof t?[t]:null),this},p)}o.version="1.1.0","undefined"!=typeof XMLHttpRequest&&(o.xhr=XMLHttpRequest),"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=o),r.djax=o):"function"==typeof e&&e.amd?e("djax",[],function(){return o}):this.djax=o}).call(this)},{}],3:[function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e,t){for(var n,o,i=r(e),s=1;s<arguments.length;s++){n=arguments[s],o=Object.keys(Object(n));for(var u=0;u<o.length;u++)i[o[u]]=n[o[u]]}return i}},{}]},{},[1])(1)});